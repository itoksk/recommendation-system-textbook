#!/usr/bin/env python3
"""
æ¼”ç¿’å•é¡Œ1: æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤
é«˜æ ¡ç”Ÿå‘ã‘ã®ç·´ç¿’å•é¡Œ
"""

# ===============================
# æ¼”ç¿’1-1: äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°
# ===============================
def exercise_1_1():
    """
    å•é¡Œ: æ˜ ç”»ã®è¦–è´æ•°ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æœ€ã‚‚äººæ°—ã®ã‚ã‚‹æ˜ ç”»Top3ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚
    
    ãƒ’ãƒ³ãƒˆ:
    - sorted()é–¢æ•°ã‚’ä½¿ã†
    - keyå¼•æ•°ã§ä¸¦ã³æ›¿ãˆã®åŸºæº–ã‚’æŒ‡å®š
    - reverse=Trueã§é™é †ã«ã™ã‚‹
    """
    
    movies = [
        {"title": "æ˜ ç”»A", "views": 1000},
        {"title": "æ˜ ç”»B", "views": 2500},
        {"title": "æ˜ ç”»C", "views": 1800},
        {"title": "æ˜ ç”»D", "views": 500},
        {"title": "æ˜ ç”»E", "views": 3000},
    ]
    
    # TODO: ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
    # top3 = ...
    
    # ç­”ãˆã‚’ç¢ºèª
    # print("Top 3 äººæ°—æ˜ ç”»:")
    # for i, movie in enumerate(top3, 1):
    #     print(f"{i}. {movie['title']} ({movie['views']}å›è¦–è´)")


# ===============================
# æ¼”ç¿’1-2: é¡ä¼¼åº¦è¨ˆç®—
# ===============================
def exercise_1_2():
    """
    å•é¡Œ: 2ã¤ã®æ˜ ç”»ã®ã‚¸ãƒ£ãƒ³ãƒ«ã®é¡ä¼¼åº¦ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚
    é¡ä¼¼åº¦ = å…±é€šã‚¸ãƒ£ãƒ³ãƒ«æ•° / å…¨ã‚¸ãƒ£ãƒ³ãƒ«æ•°
    
    ãƒ’ãƒ³ãƒˆ:
    - set()ã‚’ä½¿ã£ã¦é›†åˆæ¼”ç®—
    - & ã§ç©é›†åˆï¼ˆå…±é€šéƒ¨åˆ†ï¼‰
    - | ã§å’Œé›†åˆï¼ˆå…¨ä½“ï¼‰
    """
    
    movie1 = {
        "title": "ã‚¢ãƒ™ãƒ³ã‚¸ãƒ£ãƒ¼ã‚º",
        "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "SF", "ãƒ’ãƒ¼ãƒ­ãƒ¼"]
    }
    
    movie2 = {
        "title": "ã‚¹ãƒ‘ã‚¤ãƒ€ãƒ¼ãƒãƒ³",
        "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "ãƒ’ãƒ¼ãƒ­ãƒ¼", "é’æ˜¥"]
    }
    
    # TODO: é¡ä¼¼åº¦ã‚’è¨ˆç®—
    # similarity = ...
    
    # print(f"é¡ä¼¼åº¦: {similarity:.2f}")


# ===============================
# æ¼”ç¿’1-3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
# ===============================
def exercise_1_3():
    """
    å•é¡Œ: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–è´å±¥æ­´ã‹ã‚‰ã€å¥½ããªã‚¸ãƒ£ãƒ³ãƒ«ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
    
    æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
    1. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: 3å›
    2. SF: 2å›
    3. ã‚³ãƒ¡ãƒ‡ã‚£: 1å›
    """
    
    watch_history = [
        {"title": "æ˜ ç”»A", "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "SF"]},
        {"title": "æ˜ ç”»B", "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "ã‚³ãƒ¡ãƒ‡ã‚£"]},
        {"title": "æ˜ ç”»C", "genres": ["SF"]},
        {"title": "æ˜ ç”»D", "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"]},
    ]
    
    # TODO: ã‚¸ãƒ£ãƒ³ãƒ«ã”ã¨ã®è¦–è´å›æ•°ã‚’é›†è¨ˆ
    genre_count = {}
    
    # ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
    
    # çµæœã‚’è¡¨ç¤º
    # print("å¥½ããªã‚¸ãƒ£ãƒ³ãƒ©ãƒ³ã‚­ãƒ³ã‚°:")
    # for genre, count in sorted(genre_count.items(), key=lambda x: x[1], reverse=True):
    #     print(f"  {genre}: {count}å›")


# ===============================
# æ¼”ç¿’1-4: ç°¡å˜ãªæ¨è–¦
# ===============================
def exercise_1_4():
    """
    å•é¡Œ: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¥½ããªã‚¸ãƒ£ãƒ³ãƒ«ã«åŸºã¥ã„ã¦ã€æ˜ ç”»ã‚’æ¨è–¦ã—ã¦ãã ã•ã„ã€‚
    
    æ¨è–¦ãƒ«ãƒ¼ãƒ«:
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¥½ããªã‚¸ãƒ£ãƒ³ãƒ«ã‚’å«ã‚€æ˜ ç”»ã‚’æ¨è–¦
    - ã¾ã è¦‹ã¦ã„ãªã„æ˜ ç”»ã®ã¿
    - å…±é€šã‚¸ãƒ£ãƒ³ãƒ«ãŒå¤šã„é †ã«ä¸¦ã¹ã‚‹
    """
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ããªã‚¸ãƒ£ãƒ³ãƒ«
    user_preferences = ["SF", "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"]
    
    # è¦–è´æ¸ˆã¿æ˜ ç”»
    watched = ["æ˜ ç”»A", "æ˜ ç”»C"]
    
    # æ˜ ç”»ãƒªã‚¹ãƒˆ
    movies = [
        {"title": "æ˜ ç”»A", "genres": ["SF", "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"]},  # è¦–è´æ¸ˆã¿
        {"title": "æ˜ ç”»B", "genres": ["ã‚³ãƒ¡ãƒ‡ã‚£"]},
        {"title": "æ˜ ç”»C", "genres": ["SF"]},  # è¦–è´æ¸ˆã¿
        {"title": "æ˜ ç”»D", "genres": ["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "çŠ¯ç½ª"]},
        {"title": "æ˜ ç”»E", "genres": ["SF", "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "å†’é™º"]},
    ]
    
    # TODO: æ¨è–¦ãƒªã‚¹ãƒˆã‚’ä½œæˆ
    recommendations = []
    
    # ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
    
    # çµæœã‚’è¡¨ç¤º
    # print("ãŠã™ã™ã‚æ˜ ç”»:")
    # for movie in recommendations:
    #     print(f"  - {movie['title']}")


# ===============================
# æ¼”ç¿’1-5: è©•ä¾¡ã®é‡ã¿ä»˜ã‘
# ===============================
def exercise_1_5():
    """
    å•é¡Œ: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©•ä¾¡ã«åŸºã¥ã„ã¦ã€åŠ é‡å¹³å‡ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚
    
    åŠ é‡å¹³å‡ã®è¨ˆç®—:
    - æ–°ã—ã„è©•ä¾¡ã»ã©é‡ã¿ã‚’å¤§ããã™ã‚‹
    - é‡ã¿ = 1 / (ç¾åœ¨æ—¥ - è©•ä¾¡æ—¥ + 1)
    """
    
    from datetime import datetime, timedelta
    
    ratings = [
        {"movie": "æ˜ ç”»A", "rating": 5, "date": datetime.now() - timedelta(days=7)},
        {"movie": "æ˜ ç”»B", "rating": 3, "date": datetime.now() - timedelta(days=3)},
        {"movie": "æ˜ ç”»C", "rating": 4, "date": datetime.now() - timedelta(days=1)},
        {"movie": "æ˜ ç”»D", "rating": 5, "date": datetime.now()},
    ]
    
    # TODO: åŠ é‡å¹³å‡ã‚’è¨ˆç®—
    weighted_sum = 0
    weight_total = 0
    
    # ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
    
    # weighted_average = weighted_sum / weight_total
    # print(f"åŠ é‡å¹³å‡è©•ä¾¡: {weighted_average:.2f}")


# ===============================
# ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
# ===============================
def challenge_problem():
    """
    ãƒãƒ£ãƒ¬ãƒ³ã‚¸: å®Œå…¨ãªæ˜ ç”»æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚‹
    
    è¦ä»¶:
    1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ˜ ç”»ã‚’è©•ä¾¡ã§ãã‚‹ï¼ˆ1-5ç‚¹ï¼‰
    2. 3ã¤ã®æ¨è–¦æ–¹æ³•ã‚’å®Ÿè£…:
       - äººæ°—ãƒ™ãƒ¼ã‚¹
       - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ãƒ™ãƒ¼ã‚¹
       - ä¼¼ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ™ãƒ¼ã‚¹
    3. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦ï¼ˆ3ã¤ã‚’çµ„ã¿åˆã‚ã›ï¼‰
    """
    
    class MovieRecommender:
        def __init__(self):
            self.movies = []
            self.users = {}
            self.ratings = {}
            
        def add_movie(self, title, genres):
            # TODO: å®Ÿè£…
            pass
            
        def add_user(self, user_id, name):
            # TODO: å®Ÿè£…
            pass
            
        def rate_movie(self, user_id, movie_title, rating):
            # TODO: å®Ÿè£…
            pass
            
        def recommend_popular(self, user_id, n=5):
            # TODO: äººæ°—ãƒ™ãƒ¼ã‚¹ã®æ¨è–¦ã‚’å®Ÿè£…
            pass
            
        def recommend_content_based(self, user_id, n=5):
            # TODO: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹ã®æ¨è–¦ã‚’å®Ÿè£…
            pass
            
        def recommend_collaborative(self, user_id, n=5):
            # TODO: å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å®Ÿè£…
            pass
            
        def recommend_hybrid(self, user_id, n=5):
            # TODO: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦ã‚’å®Ÿè£…
            pass
    
    # ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒ†ã‚¹ãƒˆ
    # recommender = MovieRecommender()
    # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã


# ===============================
# ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œ
# ===============================
if __name__ == "__main__":
    print("ğŸ“š æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤ - æ¼”ç¿’å•é¡Œ")
    print("=" * 50)
    
    print("\næ¼”ç¿’1-1: äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°")
    exercise_1_1()
    
    print("\næ¼”ç¿’1-2: é¡ä¼¼åº¦è¨ˆç®—")
    exercise_1_2()
    
    print("\næ¼”ç¿’1-3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«")
    exercise_1_3()
    
    print("\næ¼”ç¿’1-4: ç°¡å˜ãªæ¨è–¦")
    exercise_1_4()
    
    print("\næ¼”ç¿’1-5: è©•ä¾¡ã®é‡ã¿ä»˜ã‘")
    exercise_1_5()
    
    print("\nğŸ† ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ")
    print("challenge_problem()ã‚’å®Ÿè£…ã—ã¦ã¿ã¦ãã ã•ã„ï¼")